<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Localization - Decoy 5</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Decoy 5">
    <meta property="og:image" content="None/../images/decoy-logo-placeholder.png">
    <meta name="apple-mobile-web-app-title" content="Decoy 5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../images/decoy-logo-placeholder.png">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Raleway', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../css/style.css">
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Features <i class="icon icon-link"></i>
              
            
          </span>
        
        Localization
      </div>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/bkwld" title="@bkwld on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/bkwld" title="@bkwld on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../images/decoy-logo-placeholder.png">
        </div>
      
      <div class="name">
        <strong>
          Decoy 5
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Setup" href="..">
      Setup
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Getting Started" href="../getting_started/">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Models" href="../models/">
      Models
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Views" href="../views/">
      Views
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Controllers" href="../controllers/">
      Controllers
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Features</span>
    <ul>
      
        
  <li>
    <a class="" title="Custom Form Fields" href="../custom_form_fields/">
      Custom Form Fields
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Elements" href="../elements/">
      Elements
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Images" href="../images/">
      Images
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Localization" href="./">
      Localization
    </a>
    
      
      
        <ul>
          
            <li class="anchor">
              <a title="Elements localization" href="#elements-localization">
                Elements localization
              </a>
            </li>
          
            <li class="anchor">
              <a title="Model localization" href="#model-localization">
                Model localization
              </a>
            </li>
          
            <li class="anchor">
              <a title="Frontend implementation" href="#frontend-implementation">
                Frontend implementation
              </a>
            </li>
          
        </ul>
      
    
  </li>

      
        
  <li>
    <a class="" title="Model Duplication" href="../model_duplication/">
      Model Duplication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Permissions" href="../permissions/">
      Permissions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Slugs" href="../slugs/">
      Slugs
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Validation" href="../validation/">
      Validation
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Video Encoding" href="../video_encoding/">
      Video Encoding
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Workers" href="../workers/">
      Workers
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="WYSIWYG" href="../wysiwyg/">
      WYSIWYG
    </a>
    
  </li>

      
    </ul>
  </li>

          
            
  <li>
    <a class="" title="Contribute" href="../contribute/">
      Contribute
    </a>
    
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
              
              <li>
                <a href="https://twitter.com/bkwld" target="_blank" title="@bkwld on Twitter">
                  @bkwld on Twitter
                </a>
              </li>
            
            
              
              <li>
                <a href="https://github.com/bkwld" target="_blank" title="@bkwld on GitHub">
                  @bkwld on GitHub
                </a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>Localization</h1>
          
          <p>Decoy&rsquo;s localization features come in two flavors: (1) localization of Elements and (2) localization of model instances.  In both cases, you begin by editing the Decoy &ldquo;site.php&rdquo; config file.</p>
<h5 id="elements-localization">Elements localization</h5>
<p>Add each locale you need to support to the <code>locales</code> array, where the keys are a slug for the locale and the value is the readable name for the locale.  The former is stored in the database while the latter is displayed in form elements in Decoy.  As long as there are more than one locale in that array, the Elements UI will show a locale selector:</p>
<p><img alt="" src="http://yo.bkwld.com/image/3h1z3G3D0o11/Image%202014-12-01%20at%2010.24.18%20AM.png" /></p>
<h5 id="model-localization">Model localization</h5>
<p>To localize model records, the database table for your model needs to have the following columns:</p>
<ul>
<li>VARCHAR <code>locale</code></li>
<li>VARCHAR <code>locale_group</code></li>
</ul>
<p>Here is an example migration schema:</p>
<div class="code"><pre><span></span><span class="x">Schema::create(&#39;articles&#39;, function(Blueprint $table) {</span>
<span class="x">    $table-&gt;string(&#39;locale&#39;);</span>
<span class="x">    $table-&gt;string(&#39;locale_group&#39;)-&gt;index();</span>
<span class="x">    $table-&gt;boolean(&#39;public&#39;)-&gt;nullable(); // Not required, just an example</span>
<span class="x">    $table-&gt;index([&#39;locale&#39;, &#39;public&#39;]); // You&#39;ll want to use locale in indexes</span>
<span class="x">    $table-&gt;index([&#39;public&#39;, &#39;locale&#39;]);</span>
<span class="x">});</span>
</pre></div>


<p>Then, either set the <code>auto_localize_root_models</code> config to <code>true</code> in the &ldquo;site.php&rdquo; file OR (to control localization more granularly) set the <code>$localizable</code> static property of a model to <code>true</code>:</p>
<div class="code"><pre><span></span><span class="x">class Article extends Base {</span>
<span class="x">    static public $localizable = true;</span>
<span class="x">}</span>
</pre></div>


<p>If you set the <code>$localizable</code> property to false, it will override the global <code>auto_localize_root_models</code> config for the model.  When a model has been set to be localizeable, the following two UI elements are automatically added to edit forms.  In the left column, you can change the locale of the model being edited:</p>
<p><img alt="" src="http://yo.bkwld.com/image/313Q2K0P3P1e/Image%202014-12-01%20at%2010.32.09%20AM.png" /></p>
<p>In the right column, you can duplicate the current model into a different locale, where you can begin to customize the fields for <em>that</em> locale:</p>
<p><img alt="" src="http://yo.bkwld.com/image/2W1G243m1p12/Image%202014-12-01%20at%2010.31.04%20AM.png" /></p>
<p>The &ldquo;Compare&rdquo; radio buttons enable tooltips for each form group that show the value of that group in the selected locale.</p>
<h5 id="frontend-implementation">Frontend implementation</h5>
<p>Decoy provides some helpers for selecting a locale on the frontend of the site.  It&rsquo;s assumed that there will be some way that a user chooses a locale.  This might be from a menu or by accessing the site from a special domain.  It is up to the developer to implement this uniquely for the site.  To tell Decoy what was selected, call <code>Decoy::locale($locale)</code> where <code>$locale</code> is the slug of the locale (the key from the &ldquo;site.php&rdquo; <code>locales</code> config array).  Here is an example route that would set the locale based on what was passed in:</p>
<div class="code"><pre><span></span><span class="x">Route::get(&#39;locale/{locale}&#39;, [&#39;as&#39; =&gt; &#39;change locale&#39;, function($locale) {</span>
<span class="x">    Decoy::locale($locale);</span>
<span class="x">    return Redirect::back();</span>
<span class="x">}]);</span>
</pre></div>


<p>You can get the current locale by calling <code>Decoy::locale()</code> with no argument.  The Decoy Base Model provides a scope for restricting queries by the current locale by chaining <code>-&gt;localize()</code> onto your query.  For instance:</p>
<div class="code"><pre><span></span><span class="x">Article::ordered()-&gt;public()-&gt;localize()-&gt;paginate(10)</span>
</pre></div>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../images/" title="Images">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Images
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../model_duplication/" title="Model Duplication">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Model Duplication
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>
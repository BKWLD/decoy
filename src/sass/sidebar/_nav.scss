// Contains the top navbar
.nav {

	// Common settings
	$sub-hover-bkgd: darken($gray-dark, 2%);
	$border: 1px solid $sub-hover-bkgd;

	.top-level-nav {
		padding: 0;
		margin: 0;
		border-top: $border;

		// Make room for the bottom
		margin-bottom: $footer-height;
		@media(max-width: $screen-sm) {
			margin-bottom: $nav-bottom-height-mobile;
		}

		// the top level nav items (usually contain a subnav)
		.main-nav {
			a {
				display: block;
				border-bottom: $border;
				color: $nav-text;
				font-weight: $headings-font-weight;
				font-weight: 700;
				font-size: 12px;
				padding: $nav-pad;
				cursor: pointer;

				.glyphicon {
					display: inline-block;
					padding-right: 5px;
				}
			}

			.top-level {
				position: relative;
				background-color: lighten($gray-dark, 3%);
				
				&:hover {
					color: $nav-text-active;
					.glyphicon { color: $nav-text-active; }
				}

				&:active {
					background: $theme-primary-color;
				}

				// top level links with children show and arrow indicating children
				&.nav-arrow {
					&:after {
						@include transition( transform 100ms 0ms ceaser($easeInSine) );
						content: 'â€º';
						display: block;
						position: absolute;
						font-size: 16px;
						right: $nav-pad;
						bottom: $nav-pad - 1;
					}
				}
			}

			&.active {
				.top-level {
					color: $theme-primary-color;

					// on parent links, just keep the active color, not theme primary
					&.nav-arrow {
						color: $nav-text-active;

						span.glyphicon {
							color: $theme-primary-color;
						}
					}


					// rotate the arrow down when open
					&.nav-arrow:after {
						@include transform( rotate(90deg) ); 
					}
				}
			}

			// the nested nav items within the parent
			.subnav {
				background-color: darken($gray-dark, 6%);
				overflow: hidden;
				max-height: 0;
				@include transition(max-height 300ms);

				a {
					font-size: 12px;
					font-weight: 300;
					padding: 8px;
					position:relative;
					border-bottom: 1px solid darken($gray-dark, 4%);
					padding-left: 31px;

					// if there's a glyphicon, give it a negative left margin
					// so that the subnavs line up better
					.glyphicon {
						margin-left: -20px;
					}

					// subnav dots 
					&:after {
						content: '';
						border:1px solid darken($nav-text, 30%);
						background-color: darken($nav-text, 30%);
						@include border-radius(50%);
						height:8px;
						width: 8px;
						display: block;
						position: absolute;
						left: 12px;
						bottom: $nav-pad + 1;
					}

					&:hover {
						background-color: $sub-hover-bkgd;
						color: $nav-text-active;

						&:after {
							border:1px solid $nav-text-active;
							background-color: $nav-text-active;
						}
					}

					&:active {
						background: $theme-primary-color;
					}

					// highlight the active page
					&.active {
						color: $nav-text-active;
						background-color: $sub-hover-bkgd;

						// set nav dots to the active color
						&:after {
							border:1px solid $theme-primary-color;
							background-color: $theme-primary-color;
						}
					}
				}
			}

			&.active {
				
				// have the currently expanded subnav show
				.subnav {
					max-height: 900px;
				}
			}
		}
	}

	// hide the nav when you're on mobile widths
	@media(max-width:$screen-sm) {
		left: -200px;
	}
}
// Related content sidebar
.related {
	
	// Increase spacing between related modules
	& > div {
		margin-bottom: 35px;
	}
	
	// This is the title unit
	legend {
		margin-bottom: 0;
		
		// The count needs shifting up a tad
		.badge {
			position: relative;
			top: -2px;
		}
		
		// Make the link in the title less obstrusive
		& a {
			color: $near-black;
			&.btn-info {
				color: white;
			}
		}
		
		// Autocomplete form
		form {
			margin: 0;
			line-height: 0;
			
			// Make the input form match the small add button
			input {
				font-size: 11.9px;
				@include box-sizing(border-box); // This was needed for mobile
				height: 26px;
				min-height: 26px;
			}
		}
	}
	
	// Move the "see full list" link up to overlap the bottom line of th elist
	.full-list {
		margin-top: -22px;
	}

}

// Parapraphs inside of the form are for larger description blocks.  Given
// them more padding
form > p {
	margin-bottom: 20px;
}

// Toning down the required icons
i.required {
	@include opacity($light-opacity);
	&:hover {
		@include opacity(1);
	}
}

// Doning down the help signs
.help-block .icon-question-sign {
	@include opacity($light-opacity);
	.control-group:hover & {
		@include opacity(1);
	}
}

// Making the counts in moderation tabs match the colors of the text
.nav-tabs {
	a { color: #999; }
	.badge { background-color: #999; }
	.active {
		a { color: $near-black; }
		.badge { background-color: $near-black; }
	}
}

// Distinguish between labels and help blocks
label {
	color: black;
	font-size: 14.5px;
}
.help-block {
	color: #999;
	
	// Don't make the help block text red.  The actual error message will be in an
	// inline help block
	.control-group.error & { 
		color: #999;
	}
	
	// Darken the text on rollover
	.control-group:hover & {
		color: $near-black;
	}
}

// Highlight each control group on rollover
.control-group {
	padding: 8px;
	margin: -8px;
	@include border-radius(4px);
	margin-bottom: 14px;
	input, textarea, select {
		margin-bottom: 0;
	}
	&:hover {
		background-color: $light-grey;
		text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
	}
	&.error:hover {
		background-color: #F2DEDE; // This is the Boostrap error bkgd red color
	}
}

// Show validation error messages (which show up in inline blocks)
// on their own line.  It looks better
.control-group.error {
	.help-inline {
		display: block;
		padding: 0;
		margin-top: 5px;
		font-weight: bold;
	}
}

// Don't change the color of inputs on validation errors
.control-group.error {
	input, textarea, select {
		color: inherit;
	}
}

// Tweaks to the typehead menu
.typeahead {
	
	// Make the dropdown span at least the full width of the widget
	.pull-right & {
		min-width: 100%;
	}
	
	// Make the rollover state look better
	.active a {
		color: white;
		&:hover {
			color: white;
		}
	}
	
	// Reduce the size of images
	li img {
		height: 18px;
	}
	
	// Reduce the margins (looks better when there are images in there )
	li > a {
		padding: 5px;
	}
}

// Shift icons that are in labels down a smidge
label i {
	position: relative;
	top: 1px;
}

// Chrome currently is screwing up the display of the label
// when line height is set: http://cl.ly/image/1o2W1V2y0d21
input[type="file"] {
	line-height: inherit;
	position: relative;
	top: 4px;
	height: inherit;
	margin-bottom: 5px;
}

// Change the margins on the help block.  The specificity here is because Bootstrap
// has it's own styles for horizontal forms
.help-block,
.form-horizontal input + .help-block, 
.form-horizontal select + .help-block, 
.form-horizontal textarea + .help-block {
	margin-top: 5px;
	margin-bottom: 0;
}

// These are the image upload control groups.  The 10px margins here just seemd to
// look better than the 5px that is generally the spacing on the help block.
.help-block {
	.img-polaroid { 
		margin-top: 10px; 
		@include box-sizing(border-box);
		&.no-help { // There is no help text, so we don't need to push away from it
			margin-top: 5px;
		}
	}
	
	// Make the images span the full column when in a related view
	.span6 & .img-polaroid {
		width: 100%;
	}
	
	// Style the image delete button
	.image-delete { 
		margin-top: 10px;
		font-size: 14px;
		color: #D14;
		a { color: #D14;}
		i {
			position: relative;
			top: -1px;
		}
		code { background: none; }
	}
	.image-help { display: block; }
}

// This the styling for generic file uploads
.help-block {
	.download {
		a, code { color: #1E8AAA; }
	}
	.file-delete {
		&, a { color: #D14; }
	}
	.download, .file-delete {
		margin-top: 10px;
		font-size: 14px;
		i {
			position: relative;
			top: -1px;
		}
		code { background: none; }
	}
}

// Fix spacing amongst linline radio fields
.radio.inline, .checkbox.inline {
	margin-right: 10px;
}

// Button groups need their bottom margin removed
legend .btn-toolbar {
	margin: 0;
	.many-to-many-form {
		position: relative;
		top: 7px;
	}
	.btn-group {
		line-height: 0;
		top: 3px;
	}
}

// This is specifically for the "view" button that is part of
// the display module header
legend > .btn-small {
	top: 3px;
	position: relative;
}

// This field doesn't need to be so big
#seo_description {
	height: 6em;
}

// Position the belongs to btn correctly
.belongs-to .input-append .btn {
	padding-left: 8px;
	padding-right: 8px;
}

// Add an optional class to control groups that will position the contents inline
.inline .control-group, .control-group.inline {
	.control-label {
		float: left;
		width: 160px;
		line-height: 30px;
	}
	
	// Let selects be their natural width
	select {
		width: inherit;
	}
	
	// Restrict files so they have a better chance of being visible on narrower browsrs
	input[type="file"] {
		width: 190px;
	}
	
	// Anything else in there needs to go to the next line
	.help-block {
		clear: left;
	}
	
	// Fix the alignment of checkboxes http://cl.ly/image/331N470v2p2I
	.controls > label.checkbox { 
		float: left;
	}
	
	// This margin as adding too much, as in the date selector
	.input-append, .input-prepend {
		margin-bottom: 0;
	}
}

// The inputless control-group is created with a helper and is for fields
// that don't have an input .. derr
.control-group.inputless {
	.controls {
		padding: 5px 0;
	}
}

// This container contains multiple instances of images that get turned
// into jcrop instances.
.help-block .crops {
	position: relative;
	display: block;
	margin-top: 5px;
	
	// Remove the margin that we want when no crops are present
	.img-polaroid {
		margin: 0;
	}
	
	// Setup the tabs
	.tabs {
		display: inline-block;
		margin-bottom: -1px;
		
		// The tabs
		> * {
			padding: 6px;
			margin-right: 2px;
			line-height: 1em;
			display: inline-block;
			border: solid 1px transparent;
			@include border-corner-radius(top, left, 4px);
			@include border-corner-radius(top, right, 4px);
			
			// The active tab
			&.active {
				border-color: $grey-border;
				border-bottom: white;
				background-color: white;
				position: relative;
				z-index: 1;
			}
			
			// Rollover
			&:hover:not(.active) {
				cursor: pointer;
				background-color: $grey-border;
			}
		}
	}
	
	// Deactivate all but the first image
	.imgs > * {
		display: none;
	}
	.imgs > :first-child {
		display: block;
	}
	
	// Remove a little space that jcrop adds
	.imgs {
		line-height: 0;
		display: block;
	}
	
	// The fullscreen button
	.icon-fullscreen {
		margin-left: 5px;
		@include opacity(.4);
		cursor: pointer;
		.control-group:hover & {
			@include opacity(.7);
		}
		.control-group &:hover {
			@include opacity(1);
		}
	}
}

// Make an form element take up the whole page
.fullscreen {
	position: absolute !important;
	width: 96%;
	z-index: 999;
	left: 2%;
	right: 2%;
	background: rgba(255, 255, 255, .9);
	@include box-shadow(0 3px 20px rgba(0,0,0,.3));
	border: 1px solid $light-grey;
	padding: 0px;
	
	// This was on the control-group previously
	.form-vertical & {
		margin-top: -8px;
	}

	// Reset the spacing of the control-group
	.control-group, &.control-group {
		margin: 0;
		padding: 5px;
	}
	
	// A non-related view won't have had this set eyt
	.img-polaroid {
		width: 100%;
	}
	
}

// The actions btns should have a bottom margin so they wrap to multiple
// lines nicer
.controls.actions .btn {
	margin-bottom: 5px;
}

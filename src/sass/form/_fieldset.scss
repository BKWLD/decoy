/**
 * Fieldset group blocks of fields with a legend for a title
 */
fieldset, .related .standard-list, body.index .standard-list {
	$pad: 15px;

	// Surround sections in a white box
	@include panel;

	// Don't use an actual legend because it inherits weird positioning
	// from the browser when put in a fieldset
	.legend {	
		font-size: 16px;
		font-weight: $headings-font-weight;
		font-family: $headings-font-family;

		// Set the font color so links get it too
		&, > a { 
			color: $theme-secondary-inverse;
		}

		// Give it a background
		background: $theme-secondary-color;
		padding: 7px $pad; // 7px makes it about as high as table th's

		// If something is pulled-right, give it a max width.  This is designed to
		// constrain the autocomplete form on many to manys but may of other,
		// useful, ramifications
		> .pull-right {
			max-width: 50%;

			// Also, nudge it up a bit to make it vertically centered
			margin-top: -2px;

			// And, move it right so the right gap is the same as the top-bottom one
			margin-right: -10px;

			// Reset the font
			font-family: $font-family-sans-serif;
		}

		@media(max-width: $screen-sm) {
			padding-left: 8px;
		}
	}

	// Make the related tables flush
	&.standard-list {
		padding: 0;
		.legend { margin: 0; }
		.listing { margin-bottom: 0;}

		// Put padding on the cells so that the normal fieldset padding looks
		// maintained
		th:first-child, td:first-child { padding-left: $pad; }
		th[class*='actions'], td[class*='actions'] { padding-right: $pad; }

		// Remove the last row border
		tr:last-child td { border-bottom: none; }

		// Give the controller name a hover effect
		.legend > a {
			border-bottom: dotted 1px $theme-secondary-inverse;
			&:hover, &:focus { 
				$color: mix($theme-secondary-inverse, $theme-secondary-color, 60%);
				color:  $color;
				border-bottom-color: $color;
			}
		}

	}

	// A disabled fieldset is used, for instance, for sidebar listings before
	// the parent is saved
	&.disabled {
		@include opacity(.7);
		.legend { background: grayscale($theme-secondary-color); }

		// This is the message
		p {
			text-align: center;
			padding: 50px 0;

			// Clear the important icon, it made the text centering feel weird
			.glyphicon { display: none; }
		}
	}

}
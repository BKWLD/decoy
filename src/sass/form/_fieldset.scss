/**
 * Fieldset group blocks of fields with a legend for a title
 */
fieldset, .related .standard-list, body.index .standard-list {
	$pad: 15px;

	// Surround sections in a white box
	@include panel;

	// Don't use an actual legend because it inherits weird positioning
	// from the browser when put in a fieldset
	.legend {		

		// Set the font so links get it too
		&, > a { 
			color: $theme-secondary-inverse;
			font-weight: $headings-font-weight;
			font-family: $headings-font-family;
			font-size: 16px;
		}

		// Give it a background
		background: $theme-secondary-color;
		padding: 7px $pad; // 7px makes it about as high as table th's

		// Push the first form-group or p down a bit (but not tables)
		.form-group, + p {
			margin-top: 10px;
		}

		// If something is pulled-right, give it a max width.  This is designed to
		// constrain the autocomplete form on many to manys but may of other,
		// useful, ramifications
		> .pull-right {
			max-width: 50%;

			// Also, nudge it up a bit to make it vertically centered
			margin-top: -2px;

			// And, move it right so the right gap is the same as the top-bottom one
			margin-right: -10px;

			// Reset the font
			font-family: $font-family-sans-serif;
		}

		@media(max-width: $screen-sm) {
			padding-left: 8px;
		}
	}

	// Add form-group's hover, a little border on the left
	.form-group {
		$border-stroke: 2px;
		border-bottom: 1px solid #f1f1f1;
		padding: 10px $pad 20px;
		margin-bottom: 0;
		&:last-child {
			border-bottom: none;	
		}
		&:hover {
			background-color: #f6f6f6;
		}
	}

	// Make the related tables flush
	&.standard-list {
		padding: 0;
		.legend { margin: 0; }
		.listing { margin-bottom: 0;}

		// Put padding on the cells so that the normal fieldset padding looks
		// maintained
		th:first-child, td:first-child { padding-left: $pad; }
		th[class*='actions'], td[class*='actions'] { padding-right: $pad; }

		// Remove the last row border
		tr:last-child td { border-bottom: none; }

		// make the even rows a little darker
		tr:nth-child(even) {
			background-color: #fdfdfd;
			
			//darken the hover color slightly 
			&:hover { background-color: #f6f6f6; }
		}

	}

	// A disabled fieldset is used, for instance, for sidebar listings before
	// the parent is saved
	&.disabled {
		@include opacity(.7);
		.legend { background: grayscale($theme-secondary-color); }

		// This is the message
		p {
			text-align: center;
			padding: 50px 0;

			// Clear the important icon, it made the text centering feel weird
			.glyphicon { display: none; }
		}
	}

}
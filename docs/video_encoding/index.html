<!DOCTYPE html>
<!--[if lt IE 7 ]><html class="no-js ie6"><![endif]-->
<!--[if IE 7 ]><html class="no-js ie7"><![endif]-->
<!--[if IE 8 ]><html class="no-js ie8"><![endif]-->
<!--[if IE 9 ]><html class="no-js ie9"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    
      
        <title>Video Encoding - Decoy 5</title>
      
      
      
      
    
    <meta property="og:url" content="None">
    <meta property="og:title" content="Decoy 5">
    <meta property="og:image" content="None/../images/decoy-logo-placeholder.png">
    <meta name="apple-mobile-web-app-title" content="Decoy 5">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    
      <link rel="apple-touch-icon" href="../images/decoy-logo-placeholder.png">
    
    
    <link rel="shortcut icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <link rel="icon" type="image/x-icon" href="../assets/images/favicon-e565ddfa3b.ico">
    <style>
      @font-face {
      	font-family: 'Icon';
      	src: url('../assets/fonts/icon.eot?52m981');
      	src: url('../assets/fonts/icon.eot?#iefix52m981')
               format('embedded-opentype'),
      		   url('../assets/fonts/icon.woff?52m981')
               format('woff'),
      		   url('../assets/fonts/icon.ttf?52m981')
               format('truetype'),
      		   url('../assets/fonts/icon.svg?52m981#icon')
               format('svg');
      	font-weight: normal;
      	font-style: normal;
      }
    </style>
    <link rel="stylesheet" href="../assets/stylesheets/application-a422ff04cc.css">
    
    
      
      
      
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway:400,700|Ubuntu+Mono">
      <style>
        body, input {
          font-family: 'Raleway', Helvetica, Arial, sans-serif;
        }
        pre, code {
          font-family: 'Ubuntu Mono', 'Courier New', 'Courier', monospace;
        }
      </style>
    
    
      <link rel="stylesheet" href="../css/style.css">
    
    <script src="../assets/javascripts/modernizr-4ab42b99fd.js"></script>
    
  </head>
  
  
  
  <body class=" ">
    
    <div class="backdrop">
      <div class="backdrop-paper"></div>
    </div>
    <input class="toggle" type="checkbox" id="toggle-drawer">
    <input class="toggle" type="checkbox" id="toggle-search">
    <label class="toggle-button overlay" for="toggle-drawer"></label>
    <header class="header">
      <nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        
          <span class="path">
            
              
                Features <i class="icon icon-link"></i>
              
            
          </span>
        
        Video Encoding
      </div>
    </div>
    
      
      <div class="button button-twitter" role="button" aria-label="Twitter">
        <a href="https://twitter.com/bkwld" title="@bkwld on Twitter" target="_blank" class="toggle-button icon icon-twitter"></a>
      </div>
    
    
      
      <div class="button button-github" role="button" aria-label="GitHub">
        <a href="https://github.com/bkwld" title="@bkwld on GitHub" target="_blank" class="toggle-button icon icon-github"></a>
      </div>
    
    <div class="button button-search" role="button" aria-label="Search">
      <label class="toggle-button icon icon-search" title="Search" for="toggle-search"></label>
    </div>
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
    </header>
    <main class="main">
      
      <div class="drawer">
        <nav aria-label="Navigation">
  
  <a href="/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="../images/decoy-logo-placeholder.png">
        </div>
      
      <div class="name">
        <strong>
          Decoy 5
          <span class="version">
            
          </span>
        </strong>
        
      </div>
    </div>
  </a>
  <div class="scrollable">
    <div class="wrapper">
      
      <div class="toc">
        <ul>
          
            
  <li>
    <a class="" title="Home" href="..">
      Home
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Setup" href="../setup/">
      Setup
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Getting Started" href="../getting_started/">
      Getting Started
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Models" href="../models/">
      Models
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Views" href="../views/">
      Views
    </a>
    
  </li>

          
            
  <li>
    <a class="" title="Controllers" href="../controllers/">
      Controllers
    </a>
    
  </li>

          
            
  <li>
    <span class="section">Features</span>
    <ul>
      
        
  <li>
    <a class="" title="Custom Form Fields" href="../custom_form_fields/">
      Custom Form Fields
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Elements" href="../elements/">
      Elements
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Images" href="../images/">
      Images
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Localization" href="../localization/">
      Localization
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Model Duplication" href="../model_duplication/">
      Model Duplication
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Permissions" href="../permissions/">
      Permissions
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Slugs" href="../slugs/">
      Slugs
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="Validation" href="../validation/">
      Validation
    </a>
    
  </li>

      
        
  <li>
    <a class="current" title="Video Encoding" href="./">
      Video Encoding
    </a>
    
      
      
    
  </li>

      
        
  <li>
    <a class="" title="Workers" href="../workers/">
      Workers
    </a>
    
  </li>

      
        
  <li>
    <a class="" title="WYSIWYG" href="../wysiwyg/">
      WYSIWYG
    </a>
    
  </li>

      
    </ul>
  </li>

          
        </ul>
        
          <hr>
          <span class="section">The author</span>
          <ul>
            
              
              <li>
                <a href="https://twitter.com/bkwld" target="_blank" title="@bkwld on Twitter">
                  @bkwld on Twitter
                </a>
              </li>
            
            
              
              <li>
                <a href="https://github.com/bkwld" target="_blank" title="@bkwld on GitHub">
                  @bkwld on GitHub
                </a>
              </li>
            
          </ul>
        
      </div>
    </div>
  </div>
</nav>
      </div>
      <article class="article">
        <div class="wrapper">
          
            <h1>Video Encoding</h1>
          
          <p>The <code>Former::videoEncoder</code> form field creates the upload field for a video in the admin.  However, there is additional setup that the developer must do to make video encoding work.  Currently, only one provider is supported for video encoding, <a href="https://zencoder.com/">Zencoder</a>, but it&rsquo;s implementation is relatively abstracted; other providers could be added in the future.</p>
<p>You&rsquo;ll need to edit the Decoy &ldquo;encoding.php&rdquo; config file.  It should be within your app/configs/packages directory.  The comments for each config parameter should be sufficient to explain how to use them.  Depending on where you are pushing the encoded videos to, you may need to spin up an S3 instance.  If you push to SFTP you can generate a key-pair locally (<code>ssh-keygen</code>), post the private key to <a href="https://app.zencoder.com/account/credentials">Zencoder</a> and then add the public key to the server&rsquo;s authorized_keys.</p>
<p>Note: by default, segmented files for <a href="http://en.wikipedia.org/wiki/HTTP_Live_Streaming">HTTP Live Streaming</a> while be created.  This increases encoding cost and time but will create a better experience for mobile users.  To disable this, set the <code>outputs</code> config to have <code>'playlist' =&gt; false</code>.</p>
<p>Then, models that support encoding should use the <code>Bkwld\Decoy\Models\Traits\Encodable</code> trait.  You also need to itemize each encodable attribute on the model by defining a <code>$encodable_attributes</code> property on the model.</p>
<div class="code"><pre><span></span><span class="x">class Marquee extends Base {</span>
<span class="x">    use Bkwld\Decoy\Models\Traits\Encodable;</span>
<span class="x">    protected $encodable_attributes = [&#39;video&#39;];</span>
<span class="x">    protected $upload_attributes = [&#39;video&#39;];</span>
<span class="x">}</span>
</pre></div>


<p>You may want to add an accessor for building the video tag like:</p>
<div class="code"><pre><span></span><span class="x">    public function getVideoTagAttribute() {</span>
<span class="x">        if (($encoding = $this-&gt;encoding()) &amp;&amp; ($tag = $encoding-&gt;tag)) {</span>
<span class="x">            return (string) $tag-&gt;preload();</span>
<span class="x">        }</span>
<span class="x">    }</span>
</pre></div>


<p>You may want to use <a href="https://ngrok.com/">Ngrok</a> to give your dev enviornment a public address so that Zencoder can pickup the files to convert.</p>
          <aside class="copyright" role="note">
            
            Documentation built with
            <a href="http://www.mkdocs.org" target="_blank">MkDocs</a>
            using the
            <a href="http://squidfunk.github.io/mkdocs-material/" target="_blank">
              Material
            </a>
            theme.
          </aside>
          
            <footer class="footer">
              
  <nav class="pagination" aria-label="Footer">
    <div class="previous">
      
        <a href="../validation/" title="Validation">
          <span class="direction">
            Previous
          </span>
          <div class="page">
            <div class="button button-previous" role="button" aria-label="Previous">
              <i class="icon icon-back"></i>
            </div>
            <div class="stretch">
              <div class="title">
                Validation
              </div>
            </div>
          </div>
        </a>
      
    </div>
    <div class="next">
      
        <a href="../workers/" title="Workers">
          <span class="direction">
            Next
          </span>
          <div class="page">
            <div class="stretch">
              <div class="title">
                Workers
              </div>
            </div>
            <div class="button button-next" role="button" aria-label="Next">
              <i class="icon icon-forward"></i>
            </div>
          </div>
        </a>
      
    </div>
  </nav>

            </footer>
          
        </div>
      </article>
      <div class="results" role="status" aria-live="polite">
        <div class="scrollable">
          <div class="wrapper">
            <div class="meta"></div>
            <div class="list"></div>
          </div>
        </div>
      </div>
    </main>
    <script>
      var base_url = '..';
      var repo_id  = '';
    </script>
    <script src="../assets/javascripts/application-997097ee0c.js"></script>
    
    
  </body>
</html>